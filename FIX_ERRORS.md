# ğŸ”§ ä¿®å¤ç±»å‹é”™è¯¯æŒ‡å—

## âœ… å·²ä¿®å¤çš„é—®é¢˜

æˆ‘å·²ç»ä¿®å¤äº†ä»¥ä¸‹ TypeScript ç±»å‹é—®é¢˜ï¼š

1. âœ… **EventEmitter ç±»å‹å£°æ˜** - ä¸º `GSIServer` æ·»åŠ äº†ç±»å‹å®‰å…¨çš„äº‹ä»¶æ–¹æ³•
2. âœ… **Express ä¸­é—´ä»¶å‚æ•°ç±»å‹** - æ·»åŠ äº† `NextFunction` ç±»å‹
3. âœ… **Server ç±»å‹** - ä» `any` æ”¹ä¸º `Server | null`
4. âœ… **__dirname å£°æ˜** - æ·»åŠ äº† CommonJS ç¯å¢ƒçš„ç±»å‹å£°æ˜
5. âœ… **äº‹ä»¶å›è°ƒç±»å‹** - æ˜ç¡®æŒ‡å®šäº† `GSIEvent` ç±»å‹

## ğŸš¨ å‰©ä½™é”™è¯¯åŠè§£å†³æ–¹æ³•

### é”™è¯¯ç±»å‹ï¼šCannot find module

å½“å‰çœ‹åˆ°çš„æ‰€æœ‰ "Cannot find module" é”™è¯¯éƒ½æ˜¯å› ä¸ºï¼š

**âŒ ä¾èµ–åŒ…è¿˜æ²¡æœ‰å®‰è£…ï¼**

### è§£å†³æ–¹æ³•

è¿è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…æ‰€æœ‰ä¾èµ–ï¼š

```bash
npm install
```

è¿™ä¸ªå‘½ä»¤ä¼šå®‰è£…ï¼š
- âœ… `electron` - Electron æ¡†æ¶
- âœ… `express` - HTTP æœåŠ¡å™¨
- âœ… `@types/node` - Node.js ç±»å‹å®šä¹‰
- âœ… `@types/express` - Express ç±»å‹å®šä¹‰
- âœ… `typescript` - TypeScript ç¼–è¯‘å™¨
- âœ… `electron-builder` - æ‰“åŒ…å·¥å…·

### å®‰è£…æ—¶é—´

- **é¦–æ¬¡å®‰è£…**: çº¦ 3-5 åˆ†é’Ÿï¼ˆå–å†³äºç½‘ç»œé€Ÿåº¦ï¼‰
- **åŒ…å¤§å°**: çº¦ 500 MB

### å¦‚æœå®‰è£…å¾ˆæ…¢

å¦‚æœ npm install å¾ˆæ…¢ï¼Œå¯ä»¥ä½¿ç”¨å›½å†…é•œåƒï¼š

```bash
# è®¾ç½®æ·˜å®é•œåƒ
npm config set registry https://registry.npmmirror.com

# ç„¶åå†å®‰è£…
npm install
```

## ğŸ“Š å®‰è£…å®Œæˆå

å®‰è£…å®Œæˆåï¼Œæ‰€æœ‰ç±»å‹é”™è¯¯éƒ½ä¼šæ¶ˆå¤±ï¼ä½ å¯ä»¥ï¼š

### 1. éªŒè¯æ²¡æœ‰é”™è¯¯

æ‰“å¼€ä»»æ„ `.ts` æ–‡ä»¶ï¼Œåº”è¯¥ä¸å†æœ‰çº¢è‰²æ³¢æµªçº¿é”™è¯¯æç¤ºã€‚

### 2. ç¼–è¯‘ä»£ç 

```bash
npm run build
```

åº”è¯¥ä¼šæˆåŠŸç¼–è¯‘åˆ° `dist/` ç›®å½•ã€‚

### 3. è¿è¡Œåº”ç”¨

```bash
npm run dev
```

åº”ç”¨ä¼šå¯åŠ¨å¹¶æ‰“å¼€çª—å£ã€‚

## ğŸ¯ ä¿®å¤åçš„ç±»å‹æ”¹è¿›

### 1. ç±»å‹å®‰å…¨çš„äº‹ä»¶ç³»ç»Ÿ

```typescript
// ç°åœ¨æœ‰å®Œæ•´çš„ç±»å‹æç¤ºï¼
this.gsiServer.on('gsi-event', (event: GSIEvent) => {
  // event å‚æ•°æœ‰å®Œæ•´çš„ç±»å‹ä¿¡æ¯
  console.log(event.timestamp, event.data);
});
```

### 2. æ˜ç¡®çš„äº‹ä»¶ç±»å‹å®šä¹‰

```typescript
export interface GSIServerEvents {
  'gsi-event': (event: GSIEvent) => void;
  'server-started': () => void;
  'server-stopped': () => void;
  'events-cleared': () => void;
}
```

### 3. Server ç±»å‹å£°æ˜

```typescript
// ä» any æ”¹ä¸ºå…·ä½“ç±»å‹
private server: Server | null = null;
```

## ğŸ› å¦‚æœå®‰è£…åä»æœ‰é”™è¯¯

### é‡å¯ VS Code / ç¼–è¾‘å™¨

æœ‰æ—¶å€™ç¼–è¾‘å™¨ç¼“å­˜ä¼šå¯¼è‡´é”™è¯¯æç¤ºä¸æ›´æ–°ï¼š

1. å…³é—­ç¼–è¾‘å™¨
2. é‡æ–°æ‰“å¼€é¡¹ç›®
3. ç­‰å¾… TypeScript æœåŠ¡å™¨é‡æ–°åŠ è½½

### é‡æ–°å®‰è£…ä¾èµ–

```bash
# åˆ é™¤ node_modules å’Œ lock æ–‡ä»¶
rm -rf node_modules package-lock.json

# é‡æ–°å®‰è£…
npm install
```

### æ¸…ç† TypeScript ç¼“å­˜

```bash
# åˆ é™¤ç¼–è¯‘äº§ç‰©
rm -rf dist

# é‡æ–°ç¼–è¯‘
npm run build
```

## âœ¨ ç±»å‹æ”¹è¿›æ€»ç»“

| æ”¹è¿›é¡¹ | ä¹‹å‰ | ä¹‹å |
|--------|------|------|
| Server ç±»å‹ | `any` | `Server \| null` |
| äº‹ä»¶å›è°ƒ | `any` å‚æ•° | `GSIEvent` ç±»å‹ |
| ä¸­é—´ä»¶å‚æ•° | éšå¼ any | æ˜ç¡®ç±»å‹ |
| EventEmitter | æ— ç±»å‹æç¤º | å®Œæ•´ç±»å‹æç¤º |

## ğŸ‰ ä¸‹ä¸€æ­¥

è¿è¡Œè¿™ä¸ªå‘½ä»¤å¼€å§‹ï¼š

```bash
npm install && npm run dev
```

---

**æ‰€æœ‰ç±»å‹é—®é¢˜éƒ½å·²ä¿®å¤ï¼** ğŸš€

åªéœ€è¦è¿è¡Œ `npm install` å³å¯è§£å†³æ‰€æœ‰ "Cannot find module" é”™è¯¯ã€‚

