# 🧪 快速测试指南

## 问题排查

### 问题 1：浏览器中看到空白页 ⚠️

**原因分析：**

1. **TypeScript 编译错误** - 如果编译失败，页面会是空白的
2. **React 加载错误** - 检查浏览器控制台

**解决方法：**

#### 步骤 1：检查浏览器控制台

在浏览器中按 `F12` 打开开发者工具，查看：
- Console 标签 - 是否有 JavaScript 错误
- Network 标签 - 是否有加载失败的文件

#### 步骤 2：确认构建成功

在 WSL 终端中：
```bash
cd ~/dota2-player-performance-tier-list
npm run build
```

如果看到编译错误，需要先修复。

#### 步骤 3：验证开发服务器

```bash
npm run dev
```

然后访问 http://localhost:5173，应该能看到应用界面。

---

### 问题 2：没有系统托盘图标 ✅

**这是正常的！**

Overwolf Native App **不支持**系统托盘功能。

- ❌ 不会在任务栏右下角显示图标
- ✅ 应用通过 **Overwolf 客户端**管理
- ✅ 可以在应用窗口内添加菜单

详细说明请看：[Overwolf平台限制说明.md](./Overwolf平台限制说明.md)

---

## 📝 正确的测试流程

### 方式 1：浏览器测试（UI 开发）

```bash
# 1. 启动开发服务器
npm run dev

# 2. 打开浏览器
# 访问 http://localhost:5173

# 3. 应该看到
- Dota 2 Performance Tier List 标题
- "运行环境: Web Browser (开发模式)"
- 应用状态信息
- 警告提示（不在 Overwolf 环境中）
```

**预期效果：**
- ✅ 看到完整的 UI 界面
- ⚠️ Overwolf API 功能不可用（正常）
- ⚠️ 没有系统托盘（正常，Overwolf 不支持）

---

### 方式 2：Overwolf 测试（完整功能）

```bash
# 1. 构建应用
npm run build

# 2. 在 Overwolf 中加载
# - 打开 Overwolf 客户端
# - Settings → Support → Development options
# - "Load unpacked extension"
# - 选择 dist/ 文件夹

# 3. 查看 Background 日志
# - Settings → Support → Developer Console
# - 选择你的应用
# - 查看 background 窗口的日志
```

**预期效果：**
- ✅ 应用在 Overwolf 中加载
- ✅ Background controller 启动
- ✅ 主窗口自动打开
- ✅ 显示"运行环境: Overwolf"
- ❌ 仍然**没有系统托盘**（这是正常的！）

---

## 🔍 调试空白页面

如果在浏览器中看到空白页面：

### 检查清单

1. **检查终端是否有编译错误**
   ```bash
   npm run dev
   ```
   看是否有红色错误信息

2. **检查浏览器控制台**
   - 按 `F12`
   - 查看 Console 标签
   - 查找红色错误信息

3. **检查 Network 标签**
   - 是否所有文件都成功加载
   - 是否有 404 错误

4. **常见错误修复**

   **错误 1：Uncaught ReferenceError: React is not defined**
   ```bash
   rm -rf node_modules
   npm install
   npm run dev
   ```

   **错误 2：Failed to fetch dynamically imported module**
   ```bash
   npm run build
   npm run preview
   ```

   **错误 3：Cannot find module**
   - 检查 import 路径是否正确
   - 检查文件是否存在

---

## 📸 预期界面截图说明

### 浏览器中（开发模式）

应该看到：

```
┌─────────────────────────────────────────────────────┐
│  Dota 2 Performance Tier List                      │
│  窗口 1 - 主窗口（桌面窗口）                          │
│                                                     │
│  ┌─────────────────────────────────────────────┐  │
│  │ 应用状态                                      │  │
│  │ 运行环境: Web Browser (开发模式)              │  │
│  │ Overwolf 版本: not-in-overwolf                │  │
│  │ 窗口类型: 桌面窗口                            │  │
│  └─────────────────────────────────────────────┘  │
│                                                     │
│  ⚠️ 开发模式                                       │
│  当前在浏览器中运行。要使用完整功能，              │
│  请在 Overwolf 环境中运行此应用。                  │
└─────────────────────────────────────────────────────┘
```

### Overwolf 中

应该看到：

```
┌─────────────────────────────────────────────────────┐
│  Dota 2 Performance Tier List                      │
│  窗口 1 - 主窗口（桌面窗口）                          │
│                                                     │
│  ┌─────────────────────────────────────────────┐  │
│  │ 应用状态                                      │  │
│  │ 运行环境: Overwolf                            │  │
│  │ Overwolf 版本: 0.xxx.x                        │  │
│  │ 窗口类型: 桌面窗口                            │  │
│  └─────────────────────────────────────────────┘  │
│                                                     │
│  ┌─────────────────────────────────────────────┐  │
│  │ 调试控制                                      │  │
│  │ [策略阶段] [赛后阶段]                         │  │
│  └─────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────┘
```

---

## ⚡ 快速修复命令

如果遇到问题，依次尝试：

```bash
# 1. 清理并重新安装
rm -rf node_modules package-lock.json
npm install

# 2. 重新构建
npm run build

# 3. 启动开发服务器
npm run dev
```

---

## 🎯 关键要点

1. ✅ **空白页面不是正常的** - 应该显示内容
2. ✅ **检查浏览器控制台** - 查找错误信息
3. ❌ **没有托盘图标是正常的** - Overwolf 不支持
4. ✅ **浏览器测试时有警告是正常的** - 某些功能需要 Overwolf
5. ✅ **应用通过 Overwolf 客户端管理** - 不是系统托盘

---

## 📞 还有问题？

1. 确保 Node.js 版本 >= 18
2. 确保在项目目录中运行命令
3. 查看终端错误信息
4. 查看浏览器控制台错误
5. 阅读 `Overwolf平台限制说明.md`

