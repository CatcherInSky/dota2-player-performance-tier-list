# å¼€å‘æŒ‡å—

## ğŸ“‹ å¼€å‘å‰å¿…è¯»

### ç†è§£ Overwolf Native App æ¶æ„

è¿™æ˜¯ä¸€ä¸ª**çº¯ Overwolf åº”ç”¨**ï¼Œä¸ä½¿ç”¨ Electronï¼š

\`\`\`
Overwolf Platform
    â†“
Background Controller (åå°æ§åˆ¶å™¨)
    â†“
â”œâ”€â”€ Desktop Window (æ¡Œé¢çª—å£)
â””â”€â”€ Ingame Window (æ¸¸æˆå†…çª—å£)
\`\`\`

### å…³é”®æ¦‚å¿µ

1. **Background Controller** (`src/background/background.ts`)
   - åº”ç”¨çš„"å¤§è„‘"
   - ç®¡ç†æ‰€æœ‰çª—å£
   - ç›‘å¬æ¸¸æˆäº‹ä»¶
   - å¤„ç†çƒ­é”®
   - **åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œä¸€ç›´è¿è¡Œ**

2. **Desktop Window** (`src/App.tsx`)
   - æ¡Œé¢åº”ç”¨çª—å£
   - ç”¨æˆ·ä¸»è¦äº¤äº’ç•Œé¢
   - å¯ä»¥å…³é—­å’Œé‡æ–°æ‰“å¼€

3. **Ingame Window** (`src/ingame.tsx`)
   - æ¸¸æˆå†…è¦†ç›–çª—å£
   - åœ¨æ¸¸æˆç‰¹å®šçŠ¶æ€ä¸‹æ˜¾ç¤º
   - é€æ˜èƒŒæ™¯ï¼Œç½®é¡¶æ˜¾ç¤º

---

## ğŸ”§ å¼€å‘ç¯å¢ƒè®¾ç½®

### 1. å®‰è£… Overwolf

1. ä¸‹è½½å¹¶å®‰è£… [Overwolf](https://www.overwolf.com/)
2. æ‰“å¼€ Overwolf â†’ Settings â†’ Support
3. å¯ç”¨ "Development options"

### 2. å®‰è£…é¡¹ç›®ä¾èµ–

\`\`\`bash
cd dota2-player-performance-tier-list
npm install
\`\`\`

### 3. VSCode æ‰©å±•ï¼ˆæ¨èï¼‰

- ESLint - ä»£ç è§„èŒƒ
- Prettier - ä»£ç æ ¼å¼åŒ–
- Tailwind CSS IntelliSense - CSS ç±»åæç¤º
- TypeScript - ç±»å‹æ£€æŸ¥

---

## ğŸš€ å¼€å‘å·¥ä½œæµ

### æ–¹å¼ 1ï¼šæµè§ˆå™¨å¼€å‘ï¼ˆUI å¼€å‘ï¼‰

é€‚ç”¨äºï¼šå¼€å‘ UIã€æ ·å¼ã€React ç»„ä»¶

\`\`\`bash
npm run dev
\`\`\`

- æ‰“å¼€ http://localhost:5173
- ä»£ç ä¿®æ”¹åè‡ªåŠ¨çƒ­é‡è½½
- å¿«é€Ÿè¿­ä»£ UI è®¾è®¡

**é™åˆ¶**ï¼š
- Overwolf API ä¸å¯ç”¨
- æ— æ³•æµ‹è¯•æ¸¸æˆäº‹ä»¶
- æ— æ³•æµ‹è¯•çª—å£ç®¡ç†

---

### æ–¹å¼ 2ï¼šOverwolf å¼€å‘ï¼ˆåŠŸèƒ½å¼€å‘ï¼‰

é€‚ç”¨äºï¼šæµ‹è¯• Overwolf APIã€æ¸¸æˆäº‹ä»¶ã€çª—å£ç®¡ç†

#### æ­¥éª¤ï¼š

1. **æ„å»ºåº”ç”¨**
\`\`\`bash
npm run build
\`\`\`

2. **åœ¨ Overwolf ä¸­åŠ è½½**
   - æ‰“å¼€ Overwolf
   - Settings â†’ Support â†’ Development options
   - "Load unpacked extension"
   - é€‰æ‹© `dist/` æ–‡ä»¶å¤¹

3. **æŸ¥çœ‹æ—¥å¿—**
   - Settings â†’ Support â†’ Developer Console
   - é€‰æ‹©ä½ çš„åº”ç”¨
   - æŸ¥çœ‹ background çª—å£æ—¥å¿—

4. **è°ƒè¯•çª—å£**
   - å³é”®çª—å£ â†’ "Inspect"
   - æ‰“å¼€ Chrome DevTools

5. **ä¿®æ”¹ä»£ç å**
   - è¿è¡Œ `npm run build`
   - åœ¨ Developer Console ç‚¹å‡» "Reload"

---

## ğŸ“ å¸¸è§å¼€å‘ä»»åŠ¡

### æ·»åŠ æ–°çª—å£

1. **åœ¨ manifest.json ä¸­å®šä¹‰**
\`\`\`json
"windows": {
  "my_new_window": {
    "file": "my-window.html",
    "size": { "width": 800, "height": 600 }
  }
}
\`\`\`

2. **åˆ›å»º HTML å…¥å£**
\`\`\`html
<!-- my-window.html -->
<!doctype html>
<html>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/my-window.tsx"></script>
  </body>
</html>
\`\`\`

3. **åˆ›å»º React ç»„ä»¶**
\`\`\`typescript
// src/my-window.tsx
import ReactDOM from 'react-dom/client';

function MyWindow() {
  return <div>My New Window</div>;
}

ReactDOM.createRoot(document.getElementById('root')!).render(<MyWindow />);
\`\`\`

4. **åœ¨ vite.config.ts ä¸­æ·»åŠ å…¥å£**
\`\`\`typescript
input: {
  // ... å…¶ä»–å…¥å£
  mywindow: resolve(__dirname, 'my-window.html'),
}
\`\`\`

5. **åœ¨ background ä¸­ç®¡ç†**
\`\`\`typescript
// src/background/background.ts
import { OWWindow } from '@overwolf/overwolf-api-ts';

const myWindow = new OWWindow('my_new_window');
await myWindow.restore(); // æ‰“å¼€çª—å£
\`\`\`

---

### ç›‘å¬æ–°çš„æ¸¸æˆäº‹ä»¶

1. **åœ¨ manifest.json ä¸­å£°æ˜æ‰€éœ€ç‰¹æ€§**
\`\`\`json
"data": {
  "game_events": [{
    "id": 7314,
    "title": "Dota 2",
    "required_features": [
      "game_state",
      "match_state",
      "kill"
    ]
  }]
}
\`\`\`

2. **åœ¨ background ä¸­ç›‘å¬**
\`\`\`typescript
// src/background/background.ts
overwolf.games.events.setRequiredFeatures(
  ['game_state', 'match_state'],
  callback
);

overwolf.games.events.onNewEvents.addListener((events) => {
  // å¤„ç†äº‹ä»¶
});
\`\`\`

---

### æ·»åŠ æ–°çš„çƒ­é”®

1. **åœ¨ manifest.json ä¸­å®šä¹‰**
\`\`\`json
"hotkeys": {
  "my_hotkey": {
    "title": "My Custom Hotkey",
    "action-type": "custom",
    "default": "Ctrl+Shift+M"
  }
}
\`\`\`

2. **åœ¨ background ä¸­æ³¨å†Œ**
\`\`\`typescript
OWHotkeys.onHotkeyDown('my_hotkey', () => {
  console.log('Hotkey pressed!');
  // æ‰§è¡Œæ“ä½œ
});
\`\`\`

---

### çª—å£é—´é€šä¿¡

#### æ–¹å¼ 1ï¼šä½¿ç”¨ overwolf.windows.sendMessage

**å‘é€æ–¹**ï¼š
\`\`\`typescript
overwolf.windows.obtainDeclaredWindow('target_window', (result) => {
  overwolf.windows.sendMessage(
    result.window.id,
    'target_window',
    { type: 'MY_MESSAGE', data: 'hello' },
    () => console.log('Message sent')
  );
});
\`\`\`

**æ¥æ”¶æ–¹**ï¼š
\`\`\`typescript
import { onMessageReceived } from '@/utils/overwolf';

onMessageReceived((message) => {
  if (message.type === 'MY_MESSAGE') {
    console.log('Received:', message.data);
  }
});
\`\`\`

#### æ–¹å¼ 2ï¼šä½¿ç”¨è‡ªå®šä¹‰äº‹ä»¶ï¼ˆåŒé¡µé¢æµ‹è¯•ï¼‰

**å‘é€æ–¹**ï¼š
\`\`\`typescript
window.dispatchEvent(
  new CustomEvent('my-event', { detail: 'data' })
);
\`\`\`

**æ¥æ”¶æ–¹**ï¼š
\`\`\`typescript
window.addEventListener('my-event', (e) => {
  console.log(e.detail);
});
\`\`\`

---

## ğŸ› è°ƒè¯•æŠ€å·§

### 1. è°ƒè¯• Background Controller

\`\`\`
Overwolf â†’ Settings â†’ Support â†’ Developer Console
â†’ é€‰æ‹©åº”ç”¨ â†’ æŸ¥çœ‹ background çª—å£
\`\`\`

å¸¸ç”¨è°ƒè¯•ä»£ç ï¼š
\`\`\`typescript
console.log('[Background] Message');
console.table(data);
debugger; // è®¾ç½®æ–­ç‚¹
\`\`\`

### 2. è°ƒè¯•çª—å£

- å³é”®çª—å£ â†’ "Inspect"
- åœ¨ä»£ç ä¸­æ·»åŠ  `debugger;`
- ä½¿ç”¨ React DevTools

### 3. æŸ¥çœ‹ Overwolf API è°ƒç”¨

\`\`\`typescript
overwolf.windows.getCurrentWindow((result) => {
  console.log('Window info:', result);
});
\`\`\`

### 4. æ¨¡æ‹Ÿæ¸¸æˆäº‹ä»¶

åœ¨æ¡Œé¢çª—å£ä¸­ä½¿ç”¨æµ‹è¯•æŒ‰é’®ï¼Œæˆ–ï¼š

\`\`\`typescript
// åœ¨æ§åˆ¶å°ä¸­æ‰§è¡Œ
localStorage.setItem('simulated_game_state', 'STRATEGY_TIME');
window.dispatchEvent(new CustomEvent('game-state-changed', {
  detail: 'DOTA_GAMERULES_STATE_STRATEGY_TIME'
}));
\`\`\`

---

## ğŸ“š å¸¸ç”¨ API

### çª—å£ç®¡ç†

\`\`\`typescript
import { 
  openWindow,
  closeWindow,
  minimizeWindow,
  toggleMaximize,
  dragWindow 
} from '@/utils/overwolf';

// æ‰“å¼€çª—å£
await openWindow('desktop');

// å…³é—­å½“å‰çª—å£
await closeWindow();

// æœ€å°åŒ–
await minimizeWindow();

// æ‹–åŠ¨çª—å£ï¼ˆåœ¨é¼ æ ‡äº‹ä»¶ä¸­è°ƒç”¨ï¼‰
dragWindow();
\`\`\`

### æ¸¸æˆä¿¡æ¯

\`\`\`typescript
import { getRunningGameInfo } from '@/utils/overwolf';

const gameInfo = await getRunningGameInfo();
if (gameInfo?.id === 7314) {
  console.log('Dota 2 is running');
}
\`\`\`

### ç³»ç»Ÿä¿¡æ¯

\`\`\`typescript
import { getOverwolfVersion } from '@/utils/overwolf';

const version = await getOverwolfVersion();
console.log('Overwolf version:', version);
\`\`\`

---

## ğŸ¨ UI å¼€å‘å»ºè®®

### ä½¿ç”¨ TailwindCSS

\`\`\`tsx
<div className="bg-gradient-to-br from-purple-600 to-blue-600 rounded-lg p-4">
  <h1 className="text-2xl font-bold text-white">Title</h1>
</div>
\`\`\`

### è‡ªå®šä¹‰æ ‡é¢˜æ 

\`\`\`tsx
<div 
  className="h-8 bg-black/30 cursor-move"
  onMouseDown={dragWindow}
>
  <button onClick={minimizeWindow}>â”€</button>
  <button onClick={closeWindow}>âœ•</button>
</div>
\`\`\`

### é€æ˜çª—å£æ ·å¼

\`\`\`tsx
<div className="bg-black/80 backdrop-blur-sm">
  {/* å†…å®¹ */}
</div>
\`\`\`

---

## ğŸ” æœ€ä½³å®è·µ

### 1. é”™è¯¯å¤„ç†

\`\`\`typescript
try {
  await openWindow('my_window');
} catch (error) {
  console.error('Failed to open window:', error);
  // æ˜¾ç¤ºé”™è¯¯æç¤º
}
\`\`\`

### 2. ç±»å‹å®‰å…¨

\`\`\`typescript
// ä½¿ç”¨ç±»å‹å®šä¹‰
interface Message {
  type: string;
  data: unknown;
}

onMessageReceived((message: Message) => {
  // ç±»å‹å®‰å…¨çš„å¤„ç†
});
\`\`\`

### 3. æ€§èƒ½ä¼˜åŒ–

\`\`\`typescript
// ä½¿ç”¨ React.memo
const MyComponent = React.memo(() => {
  // ...
});

// ä½¿ç”¨ useCallback
const handleClick = useCallback(() => {
  // ...
}, []);
\`\`\`

### 4. æ¸…ç†å‰¯ä½œç”¨

\`\`\`typescript
useEffect(() => {
  const handler = (e) => console.log(e);
  window.addEventListener('my-event', handler);
  
  return () => {
    window.removeEventListener('my-event', handler);
  };
}, []);
\`\`\`

---

## ğŸ“¦ æ„å»ºå’Œå‘å¸ƒ

### å¼€å‘æ„å»º

\`\`\`bash
npm run build
\`\`\`

### ç”Ÿäº§æ„å»º

1. æ›´æ–° version åœ¨ manifest.json
2. è¿è¡Œæ„å»º
\`\`\`bash
npm run build
\`\`\`
3. æµ‹è¯• dist/ æ–‡ä»¶å¤¹
4. æäº¤åˆ° Overwolf åº”ç”¨å•†åº—

---

## ğŸ”— æœ‰ç”¨çš„èµ„æº

- [Overwolf API æ–‡æ¡£](https://overwolf.github.io/docs/api/overwolf-api-overview)
- [Dota 2 æ¸¸æˆäº‹ä»¶](https://overwolf.github.io/docs/api/live-game-data/supported-games/dota-2)
- [Overwolf å¼€å‘æŒ‡å—](https://overwolf.github.io/docs/start/getting-started)
- [å®˜æ–¹ç¤ºä¾‹åº”ç”¨](https://github.com/overwolf/front-app)

---

**æœ‰é—®é¢˜ï¼Ÿ** æŸ¥çœ‹ [å¯åŠ¨è¯´æ˜.md](./å¯åŠ¨è¯´æ˜.md) æˆ– [README.md](./README.md)

